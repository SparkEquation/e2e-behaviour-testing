{"version":3,"file":"e2eBddStartup.js","sources":["webpack:///webpack/bootstrap","webpack:///./config/projectNames.ts","webpack:///./src/scripts/e2eBddStartup.ts","webpack:///./src/scripts/pageObjectsImportsGenerator.ts"],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/scripts/e2eBddStartup.ts\");\n","export let ProjectNames;\n\n(function (ProjectNames) {\n  ProjectNames[\"E2E_TESTS_FOLDER\"] = \"e2e\";\n  ProjectNames[\"E2E_PLUGINS_SUBFOLDER\"] = \"plugins\";\n  ProjectNames[\"E2E_PLUGINS_FILE\"] = \"plugins.js\";\n  ProjectNames[\"E2E_SUPPORT_SUBFOLER\"] = \"support\";\n  ProjectNames[\"E2E_SUPPORT_FILE\"] = \"support.js\";\n  ProjectNames[\"E2E_TSCONFIG_FILE\"] = \"tsconfig.common.json\";\n  ProjectNames[\"E2E_PAGE_OBJECTS_FOLDER\"] = \"pageObjects\";\n  ProjectNames[\"E2E_FEATURES_SUBFOLER\"] = \"features\";\n  ProjectNames[\"E2E_FEATURES_COMMON_SUBFOLDER\"] = \"common\";\n  ProjectNames[\"E2E_FEATURES_COMMON_BEFORE_FILE\"] = \"globalBefore.ts\";\n  ProjectNames[\"E2E_CONFIG_SUBFOLDER\"] = \"config\";\n  ProjectNames[\"GITIGNORE_FILE\"] = \".gitignore\";\n  ProjectNames[\"CONFIG_FOLDER\"] = \"config\";\n  ProjectNames[\"OUTPUT_FOLDER\"] = \"dist\";\n  ProjectNames[\"OUTPUT_TSCONFIG_FILE\"] = \"tsconfig.json\";\n  ProjectNames[\"OUTPUT_SCRIPTS_SUBFOLDER\"] = \"cli\";\n  ProjectNames[\"OUTPUT_CORE_FILENAME\"] = \"main.js\";\n  ProjectNames[\"POSTINSTALL_FOLDER\"] = \"postinstall\";\n  ProjectNames[\"SOURCES_FOLDER\"] = \"src\";\n  ProjectNames[\"SOURCES_SCRIPTS_SUBFOLDER\"] = \"scripts\";\n  ProjectNames[\"CORE_ENTRY_FILE\"] = \"index.ts\";\n  ProjectNames[\"TESTS_INDEX_FILE\"] = \"index.ts\";\n  ProjectNames[\"LIBRARY_NAME\"] = \"e2e-behaviour-testing\";\n  ProjectNames[\"CYPRESS_CONFIG_FILE\"] = \"cypress.json\";\n  ProjectNames[\"CYPRESS_INTEGRATION_CONFIG_FILE\"] = \"cypress.integration.json\";\n  ProjectNames[\"CYPRESS_UNIT_CONFIG_FILE\"] = \"cypress.unit.json\";\n  ProjectNames[\"CYPRESS_ENV_FILE\"] = \"cypress.env.json\";\n  ProjectNames[\"CYPRESS_CUCUMBER_CONFIG_FILE\"] = \".cypress-cucumber-preprocessorrc\";\n})(ProjectNames || (ProjectNames = {}));","/*\n * Copyright 2019 Spark Equation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport path from 'path';\nimport fs from 'fs';\nimport program from 'commander';\nimport { ProjectNames } from '../../config/projectNames';\nimport { generatePageObjects } from './pageObjectsImportsGenerator'; // webpack\n\nconst DEFAULT_CYPRESS_FEATURES_FOLDER = path.resolve(ProjectNames.E2E_TESTS_FOLDER, ProjectNames.E2E_FEATURES_SUBFOLER);\nconst DEFAULT_PAGE_OBJECTS_FOLDER_NAME = ProjectNames.E2E_PAGE_OBJECTS_FOLDER;\nconst EXPECTED_CONFIG_PATH = path.resolve(ProjectNames.CYPRESS_CONFIG_FILE);\nconst FAULT_EXIT_CODE = 1;\n\nfunction copyConfig(config) {\n  const configPath = path.resolve(config);\n\n  try {\n    fs.copyFileSync(configPath, EXPECTED_CONFIG_PATH);\n  } catch (err) {\n    if (err.code === 'ENOENT') {\n      console.error('Config file do not exist');\n    } else {\n      console.error(err.message);\n    }\n\n    process.exit(FAULT_EXIT_CODE);\n  }\n}\n\nfunction readConfig() {\n  try {\n    return JSON.parse(fs.readFileSync(EXPECTED_CONFIG_PATH, {\n      encoding: 'utf-8'\n    }));\n  } catch (err) {\n    console.error(err.message);\n    process.exit(FAULT_EXIT_CODE);\n  }\n}\n\nfunction determinePageObjectsPath(cypressConfig) {\n  const {\n    integrationFolder,\n    pageObjectsFolder\n  } = cypressConfig;\n\n  if (pageObjectsFolder) {\n    return path.resolve(pageObjectsFolder);\n  }\n\n  const integrationFolderPath = path.resolve(integrationFolder ? integrationFolder : DEFAULT_CYPRESS_FEATURES_FOLDER);\n  return path.resolve(integrationFolderPath, '..', DEFAULT_PAGE_OBJECTS_FOLDER_NAME);\n}\n\nprogram.version(PACKAGE_VERSION).name('e2e-bdd-startup').option('-c, --config <path>', 'path to cypress config').parse(process.argv);\nconst config = program.config || ProjectNames.CYPRESS_CONFIG_FILE;\n\nif (config !== ProjectNames.CYPRESS_CONFIG_FILE) {\n  copyConfig(config);\n}\n\nconst cypressConfig = readConfig();\nconst pageObjectsFolderPath = determinePageObjectsPath(cypressConfig);\n\ntry {\n  const stats = fs.statSync(pageObjectsFolderPath);\n\n  if (!stats.isDirectory()) {\n    throw new Error('Page objects is not a directory');\n  }\n} catch (e) {\n  console.error(e.message);\n  process.exit(FAULT_EXIT_CODE);\n}\n\ngeneratePageObjects(pageObjectsFolderPath);","import \"core-js/modules/es.array.flat\";\nimport \"core-js/modules/es.array.iterator\";\nimport \"core-js/modules/es.array.unscopables.flat\";\nimport \"core-js/modules/es.string.replace\";\n\n/*\n * Copyright 2019 Spark Equation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport fs from 'fs';\nimport path from 'path';\nimport { ProjectNames } from '../../config/projectNames';\nconst posixPath = path.posix; // Max depth of page objects files\n\nconst MAX_DEPTH = 10;\nconst AVAILABLE_EXTENSIONS = ['.js', '.ts']; //Remove extensions and encapsulate single quotes\n\nconst filesMap = filename => filename.slice(0, -3).replace(`'`, `\\\\'`); // Create file with imports\n\n\nconst filesReduce = (acc, filename) => acc + `import '${filename}';\\n`;\n\nfunction getFiles(pageObjectsPath, nestedPath = '.') {\n  const files = fs.readdirSync(path.resolve(pageObjectsPath, nestedPath), {\n    withFileTypes: true\n  });\n  return files.map(dirent => {\n    if (dirent.isDirectory()) {\n      return getFiles(pageObjectsPath, path.join(nestedPath, dirent.name));\n    }\n\n    return path.join(nestedPath, dirent.name);\n  }).flat(MAX_DEPTH);\n}\n\nexport const generatePageObjects = pageObjectDirPath => {\n  const files = getFiles(pageObjectDirPath).filter(filePath => AVAILABLE_EXTENSIONS.includes(path.extname(filePath)) && filePath !== ProjectNames.TESTS_INDEX_FILE).map(filesMap).map(file => {\n    return `./${posixPath.join(...file.split(path.sep))}`;\n  });\n  const importContent = files.reduce(filesReduce, '');\n  fs.writeFileSync(path.resolve(pageObjectDirPath, 'index.ts'), importContent);\n};"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AClFA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC/BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACxFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}