{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./config/projectNames.ts","webpack:///./node_modules/readdir-withFileTypes/dist/readdir.js","webpack:///./src/scripts/e2eBddStartup.ts","webpack:///./src/scripts/pageObjectsImportsGenerator.ts","webpack:///external \"commander\"","webpack:///external \"core-js/modules/es.array.flat\"","webpack:///external \"core-js/modules/es.array.iterator\"","webpack:///external \"core-js/modules/es.array.unscopables.flat\"","webpack:///external \"core-js/modules/es.string.replace\"","webpack:///external \"fs\"","webpack:///external \"path\"","webpack:///external \"util\""],"names":[],"mappings":";;QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;;;;;;AClFA,IAAY,YAAZ;;AAAA,WAAY,YAAZ,EAAwB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,CA7BD,EAAY,YAAY,GAAZ,gDAAY,EAAZ,CAAZ,E;;;;;;;;;;;;ACAa;AACb;AACA,4CAA4C;AAC5C;AACA,8CAA8C,cAAc;AAC5D,2BAA2B,mBAAO,CAAC,cAAI;AACvC,6BAA6B,mBAAO,CAAC,kBAAM;AAC3C,aAAa,mBAAO,CAAC,kBAAM;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT,KAAK;AACL,kCAAkC,gCAAgC,EAAE;AACpE,+BAA+B,sBAAsB,EAAE;AACvD,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,CAAC;AACD,mC;;;;;;;;;;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","file":"e2eBddStartup.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/scripts/e2eBddStartup.ts\");\n","export enum ProjectNames {\n    E2E_TESTS_FOLDER = 'e2e',\n    E2E_PLUGINS_SUBFOLDER = 'plugins',\n    E2E_PLUGINS_FILE = 'plugins.js',\n    E2E_SUPPORT_SUBFOLER = 'support',\n    E2E_SUPPORT_FILE = 'support.js',\n    E2E_TSCONFIG_FILE = 'tsconfig.common.json',\n    E2E_PAGE_OBJECTS_FOLDER = 'pageObjects',\n    E2E_FEATURES_SUBFOLER = 'features',\n    E2E_FEATURES_COMMON_SUBFOLDER = 'common',\n    E2E_FEATURES_COMMON_BEFORE_FILE = 'globalBefore.ts',\n    E2E_CONFIG_SUBFOLDER = 'config',\n    GITIGNORE_FILE = '.gitignore',\n    CONFIG_FOLDER = 'config',\n    OUTPUT_FOLDER = 'dist',\n    OUTPUT_TSCONFIG_FILE = 'tsconfig.json',\n    OUTPUT_SCRIPTS_SUBFOLDER = 'cli',\n    OUTPUT_CORE_FILENAME = 'main.js',\n    POSTINSTALL_FOLDER = 'postinstall',\n    SOURCES_FOLDER = 'src',\n    SOURCES_SCRIPTS_SUBFOLDER = 'scripts',\n    CORE_ENTRY_FILE = 'index.ts',\n    TESTS_INDEX_FILE = 'index.ts',\n    LIBRARY_NAME = 'e2e-behaviour-testing',\n    CYPRESS_CONFIG_FILE = 'cypress.json',\n    CYPRESS_INTEGRATION_CONFIG_FILE = 'cypress.integration.json',\n    CYPRESS_UNIT_CONFIG_FILE = 'cypress.unit.json',\n    CYPRESS_ENV_FILE = 'cypress.env.json',\n    CYPRESS_CUCUMBER_CONFIG_FILE = '.cypress-cucumber-preprocessorrc'\n}\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar fs_1 = __importDefault(require(\"fs\"));\nvar path_1 = __importDefault(require(\"path\"));\nvar util_1 = require(\"util\");\nvar fsReaddir = util_1.promisify(fs_1.default.readdir);\nvar fsLstat = util_1.promisify(fs_1.default.lstat);\nfunction createDirent(name, stat) {\n    return {\n        name: name,\n        isBlockDevice: stat.isBlockDevice.bind(stat),\n        isCharacterDevice: stat.isCharacterDevice.bind(stat),\n        isDirectory: stat.isDirectory.bind(stat),\n        isFIFO: stat.isFIFO.bind(stat),\n        isFile: stat.isFile.bind(stat),\n        isSocket: stat.isSocket.bind(stat),\n        isSymbolicLink: stat.isSymbolicLink.bind(stat),\n    };\n}\nexports.readdir = (function (dir, options, callback) {\n    if (typeof options === \"function\") {\n        callback = options;\n        options = {};\n    }\n    if (typeof callback !== \"function\") {\n        var err = new TypeError(\"Callback must be a function\");\n        err.code = \"ERR_INVALID_CALLBACK\";\n        throw err;\n    }\n    fsReaddir(dir, options)\n        .then(function (entries) {\n        if (!options.withFileTypes)\n            return entries;\n        return Promise.all(entries.map(function (entry) {\n            if (typeof entry !== \"string\")\n                return entry;\n            return fsLstat(path_1.default.join(dir.toString(), entry)).then(function (stat) {\n                return createDirent(entry, stat);\n            });\n        }));\n    })\n        .then(function (results) { return callback(null, results); })\n        .catch(function (err) { return callback(err); });\n});\nexports.readdirSync = (function (dir, options) {\n    var entries = fs_1.default.readdirSync(dir, options);\n    if (!(options && options.withFileTypes))\n        return entries;\n    return entries.map(function (entry) {\n        if (typeof entry !== \"string\")\n            return entry;\n        var stat = fs_1.default.lstatSync(path_1.default.join(dir, entry));\n        return createDirent(entry, stat);\n    });\n});\n//# sourceMappingURL=readdir.js.map","/*\n * Copyright 2019 Spark Equation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport path from 'path';\nimport fs from 'fs';\nimport program from 'commander';\nimport { ProjectNames } from '../../config/projectNames';\nimport { generatePageObjects } from './pageObjectsImportsGenerator';\n\n// webpack\ndeclare const PACKAGE_VERSION: string;\n\nconst DEFAULT_CYPRESS_FEATURES_FOLDER = path.resolve(\n    ProjectNames.E2E_TESTS_FOLDER, ProjectNames.E2E_FEATURES_SUBFOLER\n);\nconst DEFAULT_PAGE_OBJECTS_FOLDER_NAME = ProjectNames.E2E_PAGE_OBJECTS_FOLDER;\nconst EXPECTED_CONFIG_PATH = path.resolve(ProjectNames.CYPRESS_CONFIG_FILE);\nconst FAULT_EXIT_CODE = 1;\n\nfunction copyConfig(config): void {\n    const configPath = path.resolve(config);\n    try {\n        fs.copyFileSync(configPath, EXPECTED_CONFIG_PATH);\n    } catch (err) {\n        if (err.code === 'ENOENT') {\n            console.error('Config file do not exist');\n        } else {\n            console.error(err.message);\n        }\n        process.exit(FAULT_EXIT_CODE);\n    }\n}\n\nfunction readConfig(): any {\n    let configContent: any = null;\n    try {\n        configContent = JSON.parse(\n            fs.readFileSync(EXPECTED_CONFIG_PATH, { encoding: 'utf-8' })\n        );\n    } catch (err) {\n        console.error(err.message);\n        process.exit(FAULT_EXIT_CODE);\n    }\n    return configContent;\n}\n\nfunction determinePageObjectsPath(cypressConfig: any): string {\n    const { integrationFolder, pageObjectsFolder } = cypressConfig;\n    if (pageObjectsFolder) {\n        return path.resolve(pageObjectsFolder);\n    }\n    const integrationFolderPath = path.resolve(\n        integrationFolder ? integrationFolder : DEFAULT_CYPRESS_FEATURES_FOLDER,\n    );\n    return path.resolve(integrationFolderPath, '..', DEFAULT_PAGE_OBJECTS_FOLDER_NAME);\n}\n\nprogram\n    .version(PACKAGE_VERSION)\n    .name('e2e-bdd-startup')\n    .option('-c, --config <path>', 'path to cypress config')\n    .parse(process.argv);\n\nconst config = program.config || ProjectNames.CYPRESS_CONFIG_FILE;\n\nif (config !== ProjectNames.CYPRESS_CONFIG_FILE) {\n    copyConfig(config);\n}\nconst cypressConfig = readConfig();\nconst pageObjectsFolderPath = determinePageObjectsPath(cypressConfig);\ntry {\n    const stats = fs.statSync(pageObjectsFolderPath);\n    if (!stats.isDirectory()) {\n        throw new Error('Page objects is not a directory');\n    }\n} catch (e) {\n    console.error(e.message);\n    process.exit(FAULT_EXIT_CODE);\n}\ngeneratePageObjects(pageObjectsFolderPath);\n","/*\n * Copyright 2019 Spark Equation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport fs from 'fs';\nimport path from 'path';\nimport { ProjectNames } from '../../config/projectNames';\nimport { readdirSync } from 'readdir-withFileTypes';\n\nconst posixPath = path.posix;\n// Max depth of page objects files\nconst MAX_DEPTH = 10;\nconst AVAILABLE_EXTENSIONS = ['.js', '.ts'];\n\n//Remove extensions and encapsulate single quotes\nconst filesMap = (filename: string): string => filename.slice(0, -3).replace(`'`, `\\\\'`);\n\n// Create file with imports\nconst filesReduce = (acc, filename): string => acc + `import '${filename}';\\n`;\n\nfunction getFiles(pageObjectsPath, nestedPath = '.'): Array<string> {\n    const files = readdirSync(\n        path.resolve(pageObjectsPath, nestedPath),\n        { withFileTypes: true }\n    );\n\n    return files\n        .map(dirent => {\n            if (dirent.isDirectory()) {\n                return getFiles(pageObjectsPath, path.join(nestedPath, dirent.name));\n            }\n            return path.join(nestedPath, dirent.name);\n        })\n        .flat(MAX_DEPTH);\n}\n\nexport const generatePageObjects = (pageObjectDirPath: string): void => {\n    const files = getFiles(pageObjectDirPath)\n        .filter(\n            filePath => AVAILABLE_EXTENSIONS.includes(\n                path.extname(filePath)\n            ) && filePath !== ProjectNames.TESTS_INDEX_FILE\n        )\n        .map(filesMap)\n        .map(file => {\n            return `./${ posixPath.join(...file.split(path.sep)) }`;\n        });\n\n    const importContent = files.reduce(filesReduce, '');\n\n    fs.writeFileSync(path.resolve(pageObjectDirPath, 'index.ts'), importContent);\n};\n","module.exports = require(\"commander\");","module.exports = require(\"core-js/modules/es.array.flat\");","module.exports = require(\"core-js/modules/es.array.iterator\");","module.exports = require(\"core-js/modules/es.array.unscopables.flat\");","module.exports = require(\"core-js/modules/es.string.replace\");","module.exports = require(\"fs\");","module.exports = require(\"path\");","module.exports = require(\"util\");"],"sourceRoot":""}